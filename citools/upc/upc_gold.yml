---
# Obtain IP addresses of containers
- name: Get ci-a IP address
  shell: "docker inspect --format {% raw %}'{{ .NetworkSettings.IPAddress }}' {% endraw %} ci-a"
  register: ci_a_ip

- name: Get ci-b IP address
  shell: "docker inspect --format {% raw %}'{{ .NetworkSettings.IPAddress }}' {% endraw %} ci-b"
  register: ci_b_ip

- name: Get ci-c IP address
  shell: "docker inspect --format {% raw %}'{{ .NetworkSettings.IPAddress }}' {% endraw %} ci-c"
  register: ci_c_ip

- name: Get ci-d IP address
  shell: "docker inspect --format {% raw %}'{{ .NetworkSettings.IPAddress }}' {% endraw %} ci-d"
  register: ci_d_ip

- name: Get ci-e IP address
  shell: "docker inspect --format {% raw %}'{{ .NetworkSettings.IPAddress }}' {% endraw %} ci-e"
  register: ci_e_ip

- name: Get ci-dit IP address
  shell: "docker inspect --format {% raw %}'{{ .NetworkSettings.IPAddress }}' {% endraw %} ci-dit"
  register: ci_dit_ip

- set_fact:
    jenkins_ip_address:  "{{ ci_a_ip.stdout }}"
    jenkins_location:    "{{ ci_a_ip.stdout }}"
    nexus_ip_address:    "{{ ci_a_ip.stdout }}"
    database_ip_address: "{{ ci_d_ip.stdout }}"
    gogs_ip_address:     "{{ ci_e_ip.stdout }}"
    sonar_ip_address:    "{{ ci_e_ip.stdout }}"
    remote_ip_address:   "{{ ci_dit_ip.stdout }}"
    jenkins_url:         "{{ ci_a_ip.stdout }}:{{ jenkins_port }}"
    nexus_url:           "{{ ci_a_ip.stdout }}"
    gogs_url:            "http://{{ ci_b_ip.stdout }}:{{ gogs_port }}"
    sonar_url:           "{{ ci_b_ip.stdout }}"

- set_fact:
    pamm_dit_ip_address: "{{ ci_dit_pamm_ip.stdout }}"
  when: pamm == "yes"

- set_fact:
    jamm_dit_ip_address: "{{ ci_dit_jamm_ip.stdout }}"
  when: jamm == "yes"
