---
- name: Set yum cache to "keep"
  replace:
    dest: /etc/yum.conf
    regexp:  'keepcache=(.*)'
    replace: 'keepcache=1'
  when: connection == "docker"

- block: # Install firewalld and start service
  - name: Installing the firewalld command
    include: plays/install_rpms.yml
    with_dict: "{{ firewalld_packages }}"
    loop_control:
      loop_var: package

  - name: Starting firewalld Service
    service:
      name: firewalld
      state: started
      enabled: yes
  when: connection == "ssh"

- name: Installing the Unzip command
  include: plays/install_rpm.yml
  vars:
    rpm_app_name: "unzip"
    rpm_filename: "{{ item | basename }}"
  with_fileglob: "cache/{{ unzip_rpm }}"

- name: Installing EPEL Yum Repository
  include: plays/install_rpm.yml
  vars:
    rpm_app_name: "EPEL YUM Repository"
    rpm_filename: "{{ item | basename }}"
  with_fileglob: "cache/{{ epel_rpm }}"
